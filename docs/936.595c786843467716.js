"use strict";(self.webpackChunkaoc22=self.webpackChunkaoc22||[]).push([[936],{7936:(A,S,i)=>{i.r(S),i.d(S,{D07Module:()=>m});var z=i(6895),a=i(8505),r=i(1571),w=i(6691),y=i(4454),P=i(1827);class g{constructor(t,s){this.name=t,this.size=s}}class d{constructor(t="/"){this.name=t,this.totalSize=0,this.parent=null,this.children=[],this.contents=[]}}class C{constructor(t){this.root=t}}class D{constructor(t){this.command=t,this.result=[]}addResultLine(t){this.result.push(t)}}class h{constructor(t,s,e){this.inputService=t,this.engineService=s,this.canvasService=e,this.commands=[],this.fileSystem=new C(new d),this.part1MaxSpace=1e5,this.totalSpace=7e7,this.neededSpace=3e7}ngOnDestroy(){this.engineService.interrupt()}ngAfterViewInit(){this.inputService.get("07").pipe((0,a.b)(t=>this.processInput(t)),(0,a.b)(()=>this.processCommands()),(0,a.b)(()=>this.processTotalSize(this.fileSystem.root)),(0,a.b)(()=>this.processPart1()),(0,a.b)(()=>this.processPart2())).subscribe()}processInput(t){let s=null;for(const e of t)if(""!==e){if("$"===e.charAt(0)){null!==s&&this.commands.push(s),s=new D(e);continue}if(null===s)throw new Error;s.addResultLine(e)}null!==s&&s!==this.commands[this.commands.length-1]&&this.commands.push(s)}processCommands(){let t=this.fileSystem.root;for(const s of this.commands){const e=s.command.match(/^\$ (cd|ls) ?(.*)$/);if(null===e)throw new Error;const l=e[2]||null;switch(e[1]){case"cd":if(null===l)throw new Error;if("/"===l)t=this.fileSystem.root;else if(".."===l){if(null===t.parent)throw new Error;t=t.parent}else{let o=t.children.find(c=>c.name===l);void 0===o&&(o=new d(l),o.parent=t,t.children.push(o)),t=o}break;case"ls":for(const o of s.result){let c=o.match(/^(dir|\d+) (.*)$/);if(null===c)throw new Error;const v="dir"===c[1]?"directory":"file",k="directory"===v?0:parseInt(c[1]),f=c[2];if("directory"===v){if(void 0===t.children.find(n=>n.name===f)){const n=new d(f);n.parent=t,t.children.push(n)}}else if(void 0===t.contents.find(n=>n.name===f)){const n=new g(f,k);t.contents.push(n)}}}}}processTotalSize(t){let s=0;for(const e of t.contents)s+=e.size;for(const e of t.children)s+=this.processTotalSize(e);return t.totalSize=s,s}walkPart1(t){let s=0;t.totalSize<=this.part1MaxSpace&&(s+=t.totalSize);for(const e of t.children)s+=this.walkPart1(e);return s}walkPart2(t,s,e){s.totalSize>=t&&s.totalSize<e&&(e=s.totalSize);for(const p of s.children)e=this.walkPart2(t,p,e);return e}processPart1(){const t=this.walkPart1(this.fileSystem.root);console.log("Part1",t)}processPart2(){const s=this.walkPart2(this.neededSpace-(this.totalSpace-this.fileSystem.root.totalSize),this.fileSystem.root,this.totalSpace);console.log("Part2",s)}static#t=this.\u0275fac=function(s){return new(s||h)(r.Y36(w.f),r.Y36(y.S),r.Y36(P.t))};static#s=this.\u0275cmp=r.Xpm({type:h,selectors:[["app-d07"]],decls:0,vars:0,template:function(s,e){},encapsulation:2})}var T=i(235);const E=[{path:"",component:h}];class m{static#t=this.\u0275fac=function(s){return new(s||m)};static#s=this.\u0275mod=r.oAB({type:m});static#e=this.\u0275inj=r.cJS({imports:[z.ez,T.Bz.forChild(E)]})}}}]);