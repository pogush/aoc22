"use strict";(self.webpackChunkaoc22=self.webpackChunkaoc22||[]).push([[508],{508:(P,g,o)=>{o.r(g),o.d(g,{D08Module:()=>u});var p=o(6895),n=o(8505),a=o(1571),v=o(6691),b=o(4454),m=o(1827);class F{constructor(t=0,i=!1,s=!1,h=!1,e=0){this.height=t,this.visible=i,this.visibleFromRow=s,this.visibleFromCol=h,this.score=e}}class y{constructor(){this.trees=[]}calculateVisibilityForRow(t,i=!1){let s=-1,h=[...this.trees[t]];i&&h.reverse();for(const e of h)if(i&&e.visibleFromRow||e.height>s&&(s=e.height,e.visible=!0,e.visibleFromRow=!0,9===e.height))return}calculateVisibilityForCol(t,i=!1){let s=-1,h=this.trees.map(e=>e[t]);i&&h.reverse();for(const e of h)if(i&&e.visibleFromCol||e.height>s&&(s=e.height,e.visible=!0,e.visibleFromCol=!0,9===e.height))return}getVisibility(){for(let t=0;t<this.trees.length;t++)this.calculateVisibilityForRow(t),this.calculateVisibilityForRow(t,!0);for(let t=0;t<this.trees[0].length;t++)this.calculateVisibilityForCol(t),this.calculateVisibilityForCol(t,!0);return this.trees.reduce((t,i)=>t+i.filter(s=>s.visible).length,0)}getScoreForTree(t,i){let s=this.trees[t][i],h=0,e=0,c=0,l=0;for(let r=i+1;r<this.trees[t].length&&(h++,!(this.trees[t][r].height>=s.height));r++);if(0===h)return 0;for(let r=i-1;r>=0&&(e++,!(this.trees[t][r].height>=s.height));r--);if(0===e)return 0;for(let r=t+1;r<this.trees.length&&(c++,!(this.trees[r][i].height>=s.height));r++);if(0===c)return 0;for(let r=t-1;r>=0&&(l++,!(this.trees[r][i].height>=s.height));r--);return 0===l?0:l*h*c*e}getScore(){let t=0;return this.trees.forEach((i,s)=>i.forEach((h,e)=>{const c=this.getScoreForTree(s,e);c>t&&(t=c)})),t}}class f{constructor(t,i,s){this.inputService=t,this.engineService=i,this.canvasService=s,this.patch=new y}ngOnDestroy(){this.engineService.interrupt()}ngAfterViewInit(){let t;this.inputService.get("08").pipe((0,n.b)(()=>{t=performance.now()}),(0,n.b)(i=>this.processInput(i)),(0,n.b)(()=>this.processPart1()),(0,n.b)(()=>this.processPart2()),(0,n.b)(()=>{console.log(`Took ${performance.now()-t}ms`)})).subscribe()}processInput(t){const i=t.length-1,s=t[0].length-1;t.forEach((h,e)=>{""!==h&&(this.patch.trees[e]=[],h.split("").forEach((c,l)=>{const r=new F(parseInt(c),0===e||e===i||0==l||l==s,0==l,0==e);this.patch.trees[e].push(r)}))})}processPart1(){console.log("Part1",this.patch.getVisibility())}processPart2(){console.log("Part2",this.patch.getScore())}static#t=this.\u0275fac=function(i){return new(i||f)(a.Y36(v.f),a.Y36(b.S),a.Y36(m.t))};static#e=this.\u0275cmp=a.Xpm({type:f,selectors:[["app-d08"]],decls:0,vars:0,template:function(i,s){},encapsulation:2})}var S=o(235);const C=[{path:"",component:f}];class u{static#t=this.\u0275fac=function(i){return new(i||u)};static#e=this.\u0275mod=a.oAB({type:u});static#i=this.\u0275inj=a.cJS({imports:[p.ez,S.Bz.forChild(C)]})}}}]);